# 锁

## 互斥锁

防止两条线程同时对同一公共资源(比如全局变量)进行读写的机制。当获取锁操作失败时，线程会进入睡眠，等待锁释放时被唤醒

- 递归锁:可重入锁，同一个线程在锁释放前可再次获取锁，即可以递归调用
- 非递归锁:不可重入，必须等锁释放后才能再次获取锁

## 自旋锁

线程反复检查锁变量是否可⽤。由于线程在这⼀过程中保持执⾏， 因此是⼀种忙等待。⼀旦获取了⾃旋锁，线程会⼀直保持该锁，直⾄显式释 放⾃旋锁。⾃旋锁避免了进程上下⽂的调度开销，因此对于线程只会阻塞很短时间的场合是有效的

## 区别

- 互斥锁在线程获取锁但没有获取到时，线程会进入休眠状态，等锁被释放时线程会被唤醒
- 自旋锁的线程则会一直处于等待状态（忙等待）不会进入休眠——因此效率高